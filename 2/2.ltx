\documentclass[11pt]{article}
\usepackage{fullpage}
\usepackage{listings}
\lstset{basicstyle=\ttfamily}
\usepackage{graphicx}
\usepackage{siunitx}
\DeclareSIUnit{\degreeFahrenheit}{\degree F}
\usepackage{amsmath}
\usepackage{hyperref}

\newcommand{\SIfrac}[3]{
  {\ensuremath{\frac{\num{#1}}{\num{#2}}\,\si{#3}}}
}

\title{CS 3468 -- Homework 2}
\author{Stuart Olsen}

\allowdisplaybreaks

\begin{document}
\maketitle

\section*{Chapter 3}
\subsection*{Given the simple flashlight shown in Figure 3-38, draw a corresponding schematic diagram. Please use the schematic symbols on page 594.}

\begin{center}
  \vspace{\baselineskip}
  \includegraphics{flashlight.eps}
  \vspace{\baselineskip}
\end{center}


\subsection*{What is an LED?}
An LED, or a light-emitting diode, is a semiconductor device which emits light when a current is applied across its leads. Electrically, it functions as a diode.

\subsection*{How does an LED work?}
When current is applied across the {\em p-n} junction of an LED, electrons in the {\em n} region flow across the junction into the {\em p} region. As they flow across the junction, they drop to a lower energy level, emitting energy in the form of a photon. The net result is the emission of electromagnetic radiation typically in or near the visible light spectrum.

\subsection*{What is an IC?}
An IC, or integrated circuit, is an electronic circuit integrated into a single semiconductor substrate.

\subsection*{Name and describe the classes of ICs according to the number of electronic components they contain.}
\begin{itemize}
\item {\em Small scale integration} ICs contain up to \num{100} components per chip.
\item {\em Medium scale integration} ICs contain up to \numrange{100}{3000} components per chip.
\item {\em Large scale integration} ICs contain up to \numrange{3000}{100000} components per chip.
\item {\em Very large scale integration} ICs contain up to \numrange{100000}{1000000} components per chip.
\item {\em Ultra large scale integration} ICs contain over \num{1000000} components per chip.
\end{itemize}

\subsection*{Identify at least five ICs in Figures 3-37a and b under problem 1 of this section. Describe what these ICs are.}
\begin{itemize}
\item {\bf Freescale MPC7410 Altivec} -- A 32-bit microprocessor implementing the PowerPC RISC ISA and the Altivec instruction set; this is a main system processor.
\item {\bf Freescale MPC107} -- A PCI bridge and integrated memory controller for MPC7410 and similar microprocessors; this connects the main system processor to system memory and PCI peripherals.
\item {\bf Samsung S3C4510B} -- A 32-bit microprocessor based on the ARM7TDMI-S; this is a main system processor.
\item {\bf Texas Instruments SN74ALVCH16245} -- A 16-bit bus transceiver; this allows asynchronous communication between two buses. In this design, two transceivers connect the system data bus to flash storage, the EEPROM, two CAN buses, and displays.
\item {\bf Altera EPM7064AE-4} -- An EEPROM-based programmable logic device (FPGA); this is used in this system to control the flash storage, the EEPROM, two CAN buses, and displays.
\end{itemize}

\section*{Additional Questions}
\renewcommand{\thesubsubsection}{\alph{subsubsection}}

\subsection*{The resistance of a thermistor changes according to the temperature. In the right circuit, the resistance function of the thermistor is $R_0 = \SI{10000}{\ohm} + \SI{60}{\ohm\per\degreeFahrenheit} \cdot T$. The other resistor is $R_1 = \SI{10000}{\ohm}$. The output voltage on $R_1$ is $V_0 = \SI{3}{\volt} \cdot \frac{R_1}{R_0 + R_1}$.}
\setcounter{subsubsection}{0}
\subsubsection{If the room temperature is $T = \SI{70}{\degreeFahrenheit}$, what is $V_0$?}
\begin{align*}
  V_0 &= \SI{3}{\volt} \cdot \frac{R_1}{R_0 + R_1} \\
  &= \SI{3}{\volt} \cdot \frac{\SI{10000}{\ohm}}{R_0 + \SI{10000}{\ohm}} \\
  &= \SI{3}{\volt} \cdot \frac{\SI{10000}{\ohm}}{(\SI{10000}{\ohm} + \SI{60}{\ohm\per\degreeFahrenheit} \cdot T) + \SI{10000}{\ohm}} \\
  &= \SI{3}{\volt} \cdot \frac{\SI{10000}{\ohm}}{(\SI{10000}{\ohm} + \SI{60}{\ohm\per\degreeFahrenheit} \cdot \SI{70}{\degreeFahrenheit}) + \SI{10000}{\ohm}} \\
  &= \SI{3}{\volt} \cdot \frac{\SI{10000}{\ohm}}{(\SI{10000}{\ohm} + \SI{4200}{\ohm}) + \SI{10000}{\ohm}} \\
  &= \SI{3}{\volt} \cdot \frac{\SI{10000}{\ohm}}{\SI{14200}{\ohm} + \SI{10000}{\ohm}} \\
  &= \SI{3}{\volt} \cdot \frac{\SI{10000}{\ohm}}{\SI{24200}{\ohm}} \\
  &= \SIfrac{30000}{24200}{\volt} \\
  &\approx \fbox{\SI{1.24}{\volt}}
\end{align*}

\subsubsection{If $V_0 = \SI{1.339}{\volt}$, what is the room temperature?}
\begin{align*}
  V_0 &= \SI{3}{\volt} \cdot \frac{R_1}{R_0 + R_1} \\
  \SI{1.339}{\volt} &= \SI{3}{\volt} \cdot \frac{\SI{10000}{\ohm}}{(\SI{10000}{\ohm} + \SI{60}{\ohm\per\degreeFahrenheit} \cdot T) + \SI{10000}{\ohm}} \\
  \frac{\num{1.339}}{\num{30000}} &= \frac{\SI{1}{\ohm}}{(\SI{10000}{\ohm} + \SI{60}{\ohm\per\degreeFahrenheit} \cdot T) + \SI{10000}{\ohm}} \\
  \frac{\num{30000}}{\num{1.339}} &= \frac{(\SI{10000}{\ohm} + \SI{60}{\ohm\per\degreeFahrenheit} \cdot T) + \SI{10000}{\ohm}}{\SI{1}{\ohm}} \\
  &= \frac{\SI{20000}{\ohm} + \SI{60}{\ohm\per\degreeFahrenheit} \cdot T}{\SI{1}{\ohm}} \\
  &= \num{20000} + \SI{60}{\per\degreeFahrenheit} \cdot T \\
  \frac{\num{30000}}{\num{1.339}} - \num{20000} &= \SI{60}{\per\degreeFahrenheit} \cdot T \\
  T &=\frac{\frac{\num{30000}}{\num{1.339}} - \num{20000}}{60}\,\si{\degreeFahrenheit} \\
  &\approx \fbox{\SI{40.1}{\degreeFahrenheit}}
\end{align*}

\subsection*{Assume the resistance function of the thermistor $R_0$ is a nonlinear function, and is stored as a table (shown below) in the memory of an embedded system. Each row of the table is the resistance at a specific temperature ($\si{\degreeFahrenheit}$).}
\setcounter{subsubsection}{0}
\subsubsection{How many bytes are needed in minimum for each row to record both the temperature and the resistance?}
It takes $\lceil{\log_{2}{N}}\rceil$ bits to differentiate between $N$ distinct values. To represent an arbitrary element of the range $[m,n]$, then, requires $\lceil{\log_{2}(n-m+1)}\rceil$ bits.

If we choose to represent the temperature as an arbitrary element of the range $[-50,200]$, we will need

\begin{align*}
  \lceil{\log_{2}(n-m+1)}\rceil &= \lceil{\log_{2}(200-(-50)+1)}\rceil \\
  &= \lceil{\log_{2}(251)}\rceil \\
  &= 8 \\
\end{align*}

bits, or one byte for each temperature entry. Similarly, if we choose to represent the resistance as an arbitrary element of the range $[8000,20000]$, we will need

\begin{align*}
  \lceil{\log_{2}(n-m+1)}\rceil &= \lceil{\log_{2}(20000-8000+1)}\rceil \\
  &= \lceil{\log_{2}(12001)}\rceil \\
  &= 14 \\
\end{align*}

bits for each resistance entry. This requires two bytes' storage.

Thus, if we choose a simple biased-integer representation, we need \fbox{three bytes'} total storage per row (assuming byte-alignment for all data).

\subsubsection{How many bytes of memory are needed to store the complete table?}
Assuming there is exactly one entry for each temperature value in the range $[-50,200]$ (\si{\degreeFahrenheit}), there are $200-(-50)+1 = 251$ rows. Assuming further that no padding is added to the representation of a row (e.g., to make row entries word-aligned), the table will then occupy $3 \cdot 251 = $ \fbox{$753$ bytes} of memory.

\subsection*{Use an INA2128 chip to produce the signal $y = \SI{5}{\volt} + 26 \cdot x$, where $x$ is the input and $y$ is the output.}
\setcounter{subsubsection}{0}
\subsubsection{Make a schematic of the circuit, and show the value of the components used in the schematic.}

{\itshape See attached schematic.}

\subsubsection{Explain your schematic. For example, if you find a figure or a formula in the manual that helps you make the schematic, you should cite the figure or the formula in the explanation of your schematic and explain what help you get from it.}
The INA2128 contains two voltage amplifiers. The first is used to scale the input voltage, and the second is used to increase it by \SI{5}{\volt}.

The IC takes its operational voltage across pins 9 and 8. These are attached to $\mathbf{V_{cc}}$ (\SIrange{2.25}{18}{\volt}) and ground (\SI{0}{\volt}), respectively. Amplifier A is first used to scale the input voltage, so $\mathbf{V_{x}}$ is attached across pins 1 and 2. To scale $x$ by a gain of $G = 26$, the equation

\begin{align*}
  G = 1 + \frac{\SI{50}{\kilo\ohm}}{R_G}
\end{align*}

is used to obtain an $R_G$ of \SI{2}{\kilo\ohm}, to be applied across pins 3 and 4. Grounding pin 5 (the reference output voltage for amplifier A) then gives pin 6 (the output for amplifier A) a potential $V_0$ of $26 \cdot x$ above ground, from the equation

\begin{align*}
  V_0 = G \cdot (\mathbf{V_{IN}}^+ - \mathbf{V_{IN}}^-).
\end{align*}

Pins 6 and 7 are attached in accordance with the IC's requirements.

Amplifier B is used as a voltage adder. This is done by wiring the high output of amplifier A (pin 6) to the high input of amplifier B (pin 15) and the low input of amplifier B (pin 16) to \SI{-5}{\volt}. The voltage difference is scaled by $1$ (unchanged) by leaving pins 13 and 14 disconnected. Pins 10 and 11 are connected in accordance with the IC's requirements. There is then a potential of $\SI{5}{\volt} + 26 \cdot x$ across pins 11 and 12. These are designated the output pins for $\mathbf{V_y}$.

\subsection*{Follow the guide of Javadoc style at \url{http://en.wikipedia.org/wiki/Javadoc} to document the command {\ttfamily receive} in the interface {\ttfamily Receive}.}
\setcounter{subsubsection}{0}

\lstinputlisting{receive.nc}

\end{document}
